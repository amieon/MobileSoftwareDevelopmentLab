# 2025年夏季《移动软件开发》实验报告



<center>姓名：聂宇航  学号：23170001072</center>

| 姓名和学号？         | 聂宇航，231700                                               |
| -------------------- | ------------------------------------------------------------ |
| 本实验属于哪门课程？ | 中国海洋大学22夏《移动软件开发》                             |
| 实验名称？           | 实验1：第一个微信小程序                                      |
| 博客地址？           | [移动软件开发实验一实验报告-CSDN博客](https://blog.csdn.net/2301_80144482/article/details/150791251?spm=1011.2415.3001.5331) |
| Github仓库地址？     | [聂宇航/移动软件开发实验](https://gitee.com/IAimiku/MobileSoftwareDevelopmentLab) |

（备注：将实验报告发布在博客、代码公开至 github 是 **加分项**，不是必须做的）



## **一、实验目标**

1、学习使用快速启动模板创建小程序的方法；2、学习不使用模板手动创建小程序的方法。



## 二、实验步骤

列出实验的关键步骤、代码解析、截图。

### 2.1 账号注册与开发工具下载

搜索微信公众平台，进入官网，按照其要求进行注册

<img src="img\image-20250825165112202.png" alt="image-20250825165112202" style="zoom:60%;" />

注册完毕后，点击小程序，进入小程序页面，在页面最左边可以看到“下载”，进入后即可下载开发工具

<img src="img\image-20250825195130014.png" alt="image-20250825195130014" style="zoom:67%;" />

### 2.2 自动生成小程序

利用微信开发者工具 提供的快速启动模板自动生成代码，从而创建完成第一个示例小程序。

#### 2.2.1 创建项目

先登录我们刚刚注册的账号，选择菜单的“小程序”选项进入小程序即可进行项目创建。

依次填写项目名称、目录、AppID和是否使用云服务 就可以新建一个小程序项目。

其中 AppID为管理员在微信公众平台上注册的小程序ID。其中小程序的AppID可以登录微信公众平台(https://mp. weixin. qq.com)查看,具体查看步骤是单击左侧菜单中的“开发”选项,切换至“开发设置”面板,查看下方的AppID。(其中AppID必须填实际的小程序ID,否则部分功能将无法使用。如果开发者暂时条件受限无法注册申请小程序ID,可以使用AppID输入框试号”来体验小程序。)

![image-20250825200706579](img\image-20250825200706579.png)

#### 2.2.2 页面配置

小程序页面通常由四个文件组成：

`xxx.wxml`：页面结构（类似 HTML）

`xxx.js`：逻辑代码（类似 JavaScript）

`xxx.json`：配置文件

`xxx.wxss`：样式文件（类似 CSS）

开发工具为我们自动配置好了代码，但我们并不全需要它的代码，故我们会对其进行修改

**1.创建⻚⾯⽂件**

项目创建完毕后,在根目录中会生成文件夹pages用于存放页面文件。一般来说首页默认命名为index,表示小程序运行的第一个页面;其他页面名称可本次只需要保留首页(index)即可。

具体操作如下:

(1)将app. json文件内pages属性中的"pages/logs/logs"删除,并删除上一行末尾的逗号。

(2)按快捷键Ctrl+S保存当前修改。

![image-20250825202012728](img\image-20250825202012728.png)

**2.删除和修改⽂件**

具体操作如下:

(1)删除utils文件夹及其内部所有内容。

(2)删除pages文件夹下的logs目录及其内部所有内容。

(3)删除index. wxml 和index. wxss中的全部代码。

(4)删除index.js中的全部代码,并且输人关键词“page”找到第二个选项按回车键让其自动补全函数。

(5)删除 app.wxss 中的全部代码。

(6)删除 app.js中的全部代码,并且输入关键词“app”找到第二个选项按回车键让其自动补全兩数。

![image-20250825202416520](img\image-20250825202416520.png){ width=80% }

**2.2.3视图设计**

**1.导航栏设计**

小程序默认导航栏是黑底白字的效果,可以通过在app.json中对window 属性进行重新配置来自定义导航栏效果。

```css
  "window": {
    "navigationBarTextStyle": "black",
    "navigationBarTitleText": "这是一个小程序",
    "navigationBarBackgroundColor": "#39c5bb"
  },
```

navigationBarTextStyle为字体颜色；navigationBarTitleText为导航栏标题；navigationBarBackgroundColor为导航栏背景颜色

此时字体为黑色，背景为青色

<img src="img\image-20250825210439774.png" alt="image-20250825210439774" style="zoom:70%;" />



**2.正文设计**

在index.wxml写下这些代码：

<img src="img\image-20250825211030289.png" alt="image-20250825211030289" style="zoom:80%;" />

微信头像: (图像)组件<image>;

微信昵称:(文本)组件<text>;

按钮:(按钮)组件<button>。

在微信小程序里，class 是用来指定样式类名的。面写了 class="container"，就表示这个 <view> 使用了一个叫container的样式。class="container" 本身没有逻辑功能，它只是一个样式标记,真正的样式定义写在对应的 .wxss文件里，WXML 和 WXSS 就通过 class名字联动起来了。样式定义代码为：

![image-20250825211734743](img\image-20250825211734743.png)

在项目中新建自定义文件夹images用于存放图片,右击此文件夹,选择“硬盘打开”,将本地图片logo. png复制、粘贴进去等待使用。

<img src="img\image-20250825211825190.png" alt="image-20250825211825190" style="zoom:80%;" />

使用src属性用于指定图片来源为根目录下images文件夹中的logo. png图片,mode属性表示图片随着指定的宽度自动拉伸高度以显示原图的正确

<img src="img\image-20250825212055201.png" alt="image-20250825212055201" style="zoom:80%;" />

当然图片，和文本也是样式标记，所以我们也可以对其进行定义，代码在右边，输出在左边：

<img src="img\image-20250825212237831.png" alt="image-20250825212237831" style="zoom:80%;" />



**3.逻辑设计**

在index.js中写出下列代码

<img src="img\image-20250825213254779.png" alt="image-20250825213254779" style="zoom:80%;" />



代码分为3部分

### data

`src`, `name`, `canIUseGetUserProfile` 是页面的响应式数据。

页面首次渲染会用 `data` 的初始值。调用 `this.setData({...})` 会**局部更新**这些字段并触发视图更新（**不会替换整个 data 对象**，只修改传入的字段）。

### onLoad()

页面进入时调用一次（生命周期函数）。

`if (wx.getUserProfile)` 检测当前微信环境是否存在该 API。

把检测结果写入 `canIUseGetUserProfile`，通常用于在 WXML 中根据是否支持来显示不同按钮或提示。

### getMyInfo()

这是点击按钮时要调用的函数。

调用 `wx.getUserProfile({ desc, success })`：

`desc`：说明用途，需写清楚（审核/合规用途）。

`success(res)`：回调拿到 `res.userInfo`，包含 `nickName`、`avatarUrl` 等。

使用箭头函数 `success: (res) => { ... }` ：`this` 仍然指向当前 Page 实例，可以直接调用 `this.setData`。



### wx.getUserProfile 的行为要点

**必须由用户交互触发**（通常按钮点击）。非交互调用可能被限制或不弹窗。

在 **开发者工具** 中常常不会弹出授权对话框，而是返回模拟的“微信用户/默认头像”。要在 **真机** 上测试真实弹窗和真实数据。

`getUserInfo`（旧方式）已废弃，不要使用 `open-type="getUserInfo"`。



### 使用动态数据显示头像和昵称

在index.wxml页面修改和< text>组件的代码,将图片来源和文本内容使用双花括号({{}})做成动态数据。

![image-20250825213849219](img\image-20250825213849219.png)

## 三、程序运行结果

列出程序的最终运行结果及截图。

一开始进入程序是我们默认的头像和昵称：

![image-20250825214235452](img\image-20250825214235452.png)

点击按钮后：

![image-20250825214449092](img\image-20250825214449092.png)

在微信开发者工具里预览/真机调试时，点按钮后并没有弹出授权窗口，而直接显示了''微信用户''和默认头像。这是因为，开发者工具里测试用户信息，只能拿到模拟数据，不能拿到真实头像和昵称。

## 四、问题总结与体会

描述实验过程中所遇到的问题，以及是如何解决的。有哪些收获和体会，对于课程的安排有哪些建议。

1.

在一开始该文件的时候，输入app，会跳出来两个app：

![image-20250825215737446](img\image-20250825215737446.png)

不幸的是，我选择了不正确的那一个，导致我的代码是这样的，这也导致了我不停的编译失败

![image-20250825215927568](img\image-20250825215927568.png)

随后我就不看lab1.pdf那个文档了，去看了另一个群里发的博客，才发现这个地方错了，我两代码不一样：

<img src="img\image-20250825220052441.png" alt="image-20250825220052441" style="zoom:67%;" />



2.按钮点了没反应

明明是把博客的代码原封不动的抄下来的，为什么有问题呢，我就把我的代码和问题问了AI

它告诉我，博客的是旧写法，它还给了我新的写法：

![image-20250825220339942](img\image-20250825220339942.png)



3.点了按钮怎么不像博客那样找我要授权

还是去问了下AI，又是因为版本太旧，现在的开发者工具里测试用户信息，只能拿到模拟数据，不能拿到真实头像和昵称。

![image-20250825220557560](img\image-20250825220557560.png)